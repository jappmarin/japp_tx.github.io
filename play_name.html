<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™ â€” à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­à¸„à¸™</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --muted:#94a3b8; --ok:#10b981;
      --danger:#ef4444; --glass: rgba(255,255,255,0.03);
      font-family: Inter, ui-sans-serif, system-ui;
    }
    body{margin:0; background:linear-gradient(180deg,var(--bg),#07101a); color:#e6eef6;
         display:flex; justify-content:center; padding:28px;}
    .container{width:100%; max-width:980px; background:var(--card); border-radius:12px; padding:18px;}
    h1{margin:0 0 4px 0; font-size:18px}
    .top{display:flex; gap:12px; flex-wrap:wrap; margin-bottom:16px}
    input{flex:1; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.08);
          background:var(--glass); color:#fff;}
    button{padding:10px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:600}
    .ghost{background:transparent; border:1px solid rgba(255,255,255,0.05); color:var(--muted)}
    .list{display:grid; gap:10px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .card{background:rgba(255,255,255,0.03); padding:10px; border-radius:8px; display:flex;
          justify-content:space-between; align-items:center;}
    .left{cursor:pointer}
    .name{font-weight:600; font-size:16px}
    .count{font-size:13px; color:var(--muted); margin-top:4px}
    .btn-icon{background:transparent; border:0; cursor:pointer; color:var(--muted); font-size:18px}
  </style>
</head>
<body>
<div class="container">
  <h1>à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™</h1>

  <div class="top">
    <input id="nameInput" placeholder="à¹€à¸žà¸´à¹ˆà¸¡à¸Šà¸·à¹ˆà¸­â€¦">
    <button id="addBtn">à¹€à¸žà¸´à¹ˆà¸¡à¸Šà¸·à¹ˆà¸­</button>
    <button id="clearBtn" class="ghost">à¸¥à¸šà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</button>
  </div>

  <div id="list" class="list"></div>
</div>

<script>
  const LS_KEY = "names_with_count";

  // names = [{ name: "A", count: 0 }, ...]
  let names = loadNames();

  const nameInput = document.getElementById("nameInput");
  const addBtn = document.getElementById("addBtn");
  const clearBtn = document.getElementById("clearBtn");
  const listEl = document.getElementById("list");

  function loadNames() {
    try {
      const raw = localStorage.getItem(LS_KEY);
      return raw ? JSON.parse(raw) : [];
    } catch {
      return [];
    }
  }

  function saveNames() {
    localStorage.setItem(LS_KEY, JSON.stringify(names));
  }

  function render() {
    listEl.innerHTML = "";
    names.forEach((obj, i) => {
      const card = document.createElement("div");
      card.className = "card";

      const left = document.createElement("div");
      left.className = "left";
      left.onclick = () => increaseCount(i);

      const nameDiv = document.createElement("div");
      nameDiv.className = "name";
      nameDiv.textContent = obj.name;

      const countDiv = document.createElement("div");
      countDiv.className = "count";
      countDiv.textContent = `à¸à¸”: ${obj.count} à¸„à¸£à¸±à¹‰à¸‡`;

      left.appendChild(nameDiv);
      left.appendChild(countDiv);

      const resetBtn = document.createElement("button");
      resetBtn.className = "btn-icon";
      resetBtn.innerHTML = "ðŸ”„";
      resetBtn.title = "à¸£à¸µà¹€à¸‹à¹‡à¸•à¸ˆà¸³à¸™à¸§à¸™à¸à¸”";
      resetBtn.onclick = (e) => {
        e.stopPropagation();
        resetCount(i);
      };

      card.appendChild(left);
      card.appendChild(resetBtn);
      listEl.appendChild(card);
    });
  }

  function sanitize(s) {
    return s.trim().replace(/\s+/g, " ");
  }

  function addName() {
    let v = sanitize(nameInput.value);
    if (!v) return alert("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­");
    if (names.some(n => n.name.toLowerCase() === v.toLowerCase()))
      return alert("à¸¡à¸µà¸Šà¸·à¹ˆà¸­à¸™à¸µà¹‰à¹à¸¥à¹‰à¸§!");

    names.push({ name: v, count: 0 });
    nameInput.value = "";
    saveNames();
    render();
  }

  function increaseCount(index) {
    names[index].count++;
    saveNames();
    render();
  }

  function resetCount(index) {
    if (!confirm(`à¸£à¸µà¹€à¸‹à¹‡à¸•à¸ˆà¸³à¸™à¸§à¸™à¸à¸”à¸‚à¸­à¸‡ "${names[index].name}"?`)) return;
    names[index].count = 0;
    saveNames();
    render();
  }

  function clearAll() {
    if (!confirm("à¸¥à¸šà¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”?")) return;
    names = [];
    saveNames();
    render();
  }

  addBtn.onclick = addName;
  clearBtn.onclick = clearAll;
  nameInput.addEventListener("keydown", e => {
    if (e.key === "Enter") addName();
  });

  render();
</script>
</body>
</html>
